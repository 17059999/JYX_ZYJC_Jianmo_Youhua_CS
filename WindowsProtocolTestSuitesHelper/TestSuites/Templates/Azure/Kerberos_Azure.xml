<lab>
  <core>
    <username>IOLab</username>
    <password>Password01!</password>
    <TestSuiteName>Kerberos</TestSuiteName>
    <regressiontype>Azure</regressiontype>
    <timeoutinminutes>530</timeoutinminutes>
  </core>

  <vmsetting>
    <location>westus2</location>
    <networkId>TestSuiteOnAzure-vnet</networkId>
    <subnetName>default</subnetName>
    <resourceGroup>TestSuiteOnAzure</resourceGroup>
    <diskType>Premium_LRS</diskType>
    <vmSize>Standard_DS2_v2</vmSize>
    <fileShareRoot>https://testsuiteshare.file.core.windows.net/protocoltestsuiteshare</fileShareRoot>
    <genevaAccountRegion>westus2</genevaAccountRegion>
  </vmsetting>

  <Parameters>
    <Parameter Name="DriverVMName" Value="Kerberos-EP01" Comment="The name of the driver VM" />
  </Parameters>

  <servers>
    <vm>
      <installorder>1</installorder>
      <role>PDC01</role>
      <imageReference>
        <publisher>MicrosoftWindowsServer</publisher>
        <offer>WindowsServer</offer>
        <sku>2016-Datacenter</sku>
        <version>latest</version>
      </imageReference>
      <name>Kerberos-DC01</name>
      <domain>contoso.com</domain>
      <isdc>true</isdc>
      <ip>10.0.1.81</ip>
      <dns>127.0.0.1;10.0.1.82</dns>
      <configscript>Configure-DC01.ps1</configscript>
      <postscript>Kerberos-DC01-Postscript.ps1</postscript>
      <restartinpostscript>true</restartinpostscript>
      <skipwaitingforpostscript>false</skipwaitingforpostscript>
      <trusttargetdomain>kerb.com</trusttargetdomain>
      <trustpassword>Password01!</trustpassword>
    </vm>

    <vm>
      <installorder>2</installorder>
      <role>TDC01</role>
      <imageReference>
        <publisher>MicrosoftWindowsServer</publisher>
        <offer>WindowsServer</offer>
        <sku>2016-Datacenter</sku>
        <version>latest</version>
      </imageReference>
      <name>Kerberos-DC02</name>
      <domain>kerb.com</domain>
      <isdc>true</isdc>
      <ip>10.0.1.82</ip>
      <dns>127.0.0.1;10.0.1.81</dns>
      <postscript>Kerberos-DC02-Postscript.ps1</postscript>
      <configscript>Configure-DC02.ps1</configscript>
      <restartinpostscript>true</restartinpostscript>
      <skipwaitingforpostscript>false</skipwaitingforpostscript>
      <trusttargetdomain>contoso.com</trusttargetdomain>
      <trustpassword>Password01!</trustpassword>
      <trusttargetserver>Kerberos-DC01.contoso.com</trusttargetserver>
      <trusttargetuser>CONTOSO\IOLab</trusttargetuser>
      <trusttargetpwd>Password01!</trusttargetpwd>
    </vm>

    <vm>
      <installorder>3</installorder>
      <role>AP01</role>
      <imageReference>
        <publisher>MicrosoftWindowsServer</publisher>
        <offer>WindowsServer</offer>
        <sku>2016-Datacenter</sku>
        <version>latest</version>
      </imageReference>
      <name>Kerberos-AP01</name>
      <domain>contoso.com</domain>
      <ip>10.0.1.83</ip>
      <dns>10.0.1.81</dns>
      <installfeaturescript>Install-FSRM.ps1;Install-IIS.ps1;Install-ADDS.ps1;Write-InstallFeatureScirptDone.ps1;RestartComputer.PS1</installfeaturescript>
      <postscript>Kerberos-AP01-Postscript.ps1</postscript>
      <configscript>Configure-AP01.ps1</configscript>
      <restartinpostscript>true</restartinpostscript>
      <skipwaitingforpostscript>false</skipwaitingforpostscript>
      <dcserver>Kerberos-DC01.contoso.com</dcserver>
      <dcuser>CONTOSO\IOLab</dcuser>
      <dcpwd>Password01!</dcpwd>
    </vm>

    <vm>
      <installorder>4</installorder>
      <role>AP02</role>
      <imageReference>
        <publisher>MicrosoftWindowsServer</publisher>
        <offer>WindowsServer</offer>
        <sku>2016-Datacenter</sku>
        <version>latest</version>
      </imageReference>
      <name>Kerberos-AP02</name>
      <domain>kerb.com</domain>
      <ip>10.0.1.84</ip>
      <dns>10.0.1.82</dns>
      <installfeaturescript>Install-FSRM.ps1;Install-IIS.ps1;Install-ADDS.ps1;Write-InstallFeatureScirptDone.ps1;RestartComputer.PS1</installfeaturescript>
      <postscript>Kerberos-AP02-Postscript.ps1</postscript>
      <configscript>Configure-AP02.ps1</configscript>
      <restartinpostscript>true</restartinpostscript>
      <skipwaitingforpostscript>false</skipwaitingforpostscript>
      <dcserver>Kerberos-DC02.kerb.com</dcserver>
      <dcuser>KERB\IOLab</dcuser>
      <dcpwd>Password01!</dcpwd>
    </vm>

    <vm>
      <installorder>5</installorder>
      <role>PROXY01</role>
      <imageReference>
        <publisher>MicrosoftWindowsServer</publisher>
        <offer>WindowsServer</offer>
        <sku>2016-Datacenter</sku>
        <version>latest</version>
      </imageReference>
      <name>Kerberos-PY01</name>
      <domain>contoso.com</domain>
      <ip>10.0.1.85</ip>
      <dns>10.0.1.81;10.0.1.82</dns>
      <installfeaturescript>Install-IIS.ps1;Write-InstallFeatureScirptDone.ps1;RestartComputer.PS1</installfeaturescript>
      <postscript>Kerberos-PROXY01-Postscript.ps1</postscript>
      <configscript>Configure-PROXY.ps1</configscript>
      <restartinpostscript>true</restartinpostscript>
      <skipwaitingforpostscript>false</skipwaitingforpostscript>
    </vm>

    <vm>
      <installorder>6</installorder>
      <role>DriverComputer</role>
      <imageReference>
        <imageRefId>Win101803_VS2017</imageRefId>
      </imageReference>
      <name>Kerberos-EP01</name>
      <domain>contoso.com</domain>
      <ip>10.0.1.86</ip>
      <dns>10.0.1.81;10.0.1.82</dns>
      <localdcserver>Kerberos-DC01.contoso.com</localdcserver>
      <localapserver>Kerberos-AP01.contoso.com</localapserver>
      <localdcuser>CONTOSO\IOLab</localdcuser>
      <localdcpwd>Password01!</localdcpwd>
      <trustdcserver>Kerberos-DC02.kerb.com</trustdcserver>
      <trustapserver>Kerberos-AP02.kerb.com</trustapserver>
      <trustdcuser>KERB\IOLab</trustdcuser>
      <trustdcpwd>Password01!</trustdcpwd>
      <postscript>InstallMSIAndTools.ps1;Kerberos-ENDPOINT01-Postscript.ps1;Update-VisualStudioLicense.ps1</postscript>
      <configscript>Configure-ENDPOINT.ps1</configscript>
      <restartinpostscript>true</restartinpostscript>
      <skipwaitingforpostscript>false</skipwaitingforpostscript>
      <tools>
        <tool name="DotNetCore" EXEName="dotnet-sdk-6.0.202-win-x86.exe" version="6.0.202" CPUArchitecture="x86" ArgumentList="/quiet"/>
        <tool name="certs" ZipName="id_rsa.zip" targetFolder="C:\id_rsa\.ssh" />
        <TestsuiteZip ZipName="Kerberos-TestSuite-ServerEP.zip" targetFolder="c:\Kerberos-TestSuite-ServerEP"/>
      </tools>
    </vm>
  </servers>
</lab>
