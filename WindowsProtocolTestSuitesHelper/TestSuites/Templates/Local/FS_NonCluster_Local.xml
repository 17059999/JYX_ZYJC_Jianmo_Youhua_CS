<lab>
  <core>
    <username>administrator</username>
    <password>Password01!</password>
    <legacyclient>true</legacyclient>
    <basecpu>1</basecpu>
    <TestSuiteName>FileServer_DotNetCore_Standard</TestSuiteName>
    <Description>Domain nonCluster ENV: DC01, Client01, Node01</Description>
    <regressiontype>local</regressiontype>
    <timeoutinminutes>420</timeoutinminutes>
  </core>
  <network>
    <vnet>
      <name>FileServer-Internal</name>
      <networktype>Internal</networktype>
      <hostisgateway>true</hostisgateway>
      <ip>10.13.0.1</ip>
      <subnet>255.255.255.0</subnet>
    </vnet>
  </network>
    <Parameters>
    <!--Parameters for automation run-->
        <Parameter Name="TestCaseScript" Value="Execute-TestCaseByContext.ps1" Comment="Which test case to run." />
        <Parameter Name="TestCaseTimeout" Value="28800" Comment="Test case time out in seconds." />
        <Parameter Name="ContextName" Value="Win2012R2_Domain_NonCluster_SMB302" Comment="" />
        <Parameter Name="TestDirInVM" Value="C:\Test" Comment="" />
    </Parameters>

  <servers>
    <vm>
      <installorder>1</installorder>
      <role>DC</role>
      <imageReference>
        <diskName>17763.194.amd64fre.rs5_release.VS2017-ServerDataCenter.vhd</diskName>
        <answerFile>17763_ServerDataCenter.xml</answerFile>
      </imageReference>
      <hypervname>FS-DC</hypervname>
      <name>FS-DC</name>
      <isdc>true</isdc>
      <domain>contoso.com</domain>
      <username>Administrator</username>
      <password>Password01!</password>
      <vnet>FileServer-Internal</vnet>
      <ip>10.13.0.252</ip>
      <gateway>Empty</gateway>
      <dns>127.0.0.1</dns>
      <cpu>1</cpu>
      <memory>1024</memory>
      <installscript>createdc.ps1</installscript>
      <installfeaturescript>Install_RemoteAccess_Feature.ps1;InstallMSIAndTools.ps1;RestartComputer.PS1</installfeaturescript>
      <postscript>Disable_Firewall.ps1;Create-TestAccount.ps1;SetPasswordNeverExpires.ps1;Create-CbacObjectsInDC.ps1;Import-GPOForClaims.ps1;Check-DCStatus.ps1;Config-AuthorizedKeys.ps1</postscript>
      <tools>
        <tool name="WMF" EXEName="Win8.1AndW2K12R2-KB3191564-x64.msu" version="5.1" CPUArchitecture="x64" ArgumentList="/quiet /norestart" InstallWaitSeconds="200" SupportedOSBuilds="9600"/>
        <tool name="PowerShellCore" MSIName="PowerShellCore.msi" version="7.3.4" CPUArchitecture="x64" />
        <tool name="Win32-OpenSSH" ZipName="OpenSSH-Win64.zip" version="v9.2.2.0p1-Beta" CPUArchitecture="x64" targetFolder="c:\" />
        <tool name="Win32-OpenSSH-Certs" ZipName="win_ssh_keys.zip" targetFolder="c:\OpenSSH-Win64" installScript="install.ps1" />
      </tools>
      <skipwaitingforpostscript>false</skipwaitingforpostscript>
    </vm>
    <vm>
      <installorder>2</installorder>
      <role>NODE01</role>
      <imageReference>
        <diskName>17763.194.amd64fre.rs5_release.VS2017-ServerDataCenter.vhd</diskName>
        <answerFile>17763_ServerDataCenter.xml</answerFile>
      </imageReference>
      <hypervname>FS-SRV</hypervname>
      <name>FS-SRV</name>
      <domain>contoso.com</domain>
      <vnet>FileServer-Internal</vnet>
      <ip>10.13.0.2</ip>
      <ip>10.13.0.3</ip>
      <subnet>255.255.255.0</subnet>
      <gateway>10.13.0.1</gateway>
      <gateway>10.13.0.1</gateway>
      <dns>10.13.0.252</dns>
      <cpu>1</cpu>
      <memory>512</memory>
      <installscript>domainjoin.ps1</installscript>
      <installfeaturescript>Install-WindowsFeature.ps1;InstallMSIAndTools.ps1</installfeaturescript>
	    <postscript>Disable_Firewall.ps1;SetPasswordNeverExpires.ps1;Create-SMB2Env.ps1;Create-DFSCEnv.ps1;Create-FSAEnv.ps1;Create-AuthEnv.ps1;Create-QUICEnv.ps1;Set-RequireSigning.ps1;Set-ComputerPassword.ps1;Config-AuthorizedKeys.ps1</postscript>
      <skipwaitingforpostscript>false</skipwaitingforpostscript>
      <tools>
        <tool name="PowerShellCore" MSIName="PowerShellCore.msi" version="7.3.4" CPUArchitecture="x64" />
        <tool name="Win32-OpenSSH" ZipName="OpenSSH-Win64.zip" version="v9.2.2.0p1-Beta" CPUArchitecture="x64" targetFolder="c:\" />
        <tool name="Win32-OpenSSH-Certs" ZipName="win_ssh_keys.zip" targetFolder="c:\OpenSSH-Win64" installScript="install.ps1" />
        <tool name="WindowsAdminCenter" MSIName="WindowsAdminCenter2110.msi" version="2110" CPUArchitecture="x64" ArgumentList="SME_PORT=6516 SSL_CERTIFICATE_OPTION=generate /qn" NotSupportedOSBuilds="9200"/>
      </tools>
    </vm>
    <vm>
      <installorder>3</installorder>
      <role>DriverComputer</role>
      <imageReference>
        <diskName>17763.194.amd64fre.rs5_release.VS2017-ServerDataCenter.vhd</diskName>
        <answerFile>17763_ServerDataCenter.xml</answerFile>
      </imageReference>
      <hypervname>FS-CLI</hypervname>
      <name>FS-CLI</name>
      <domain>contoso.com</domain>
      <vnet>FileServer-Internal</vnet>
      <ip>10.13.0.4</ip>
      <gateway>10.13.0.1</gateway>
      <ip>10.13.0.5</ip>
      <gateway>10.13.0.1</gateway>
      <subnet>255.255.255.0</subnet>
      <dns>10.13.0.252</dns>
      <cpu>2</cpu>
      <memory>2048</memory>
      <installscript>InstallMSIAndTools.ps1;domainjoin.ps1</installscript>
      <postscript>Disable_Firewall.ps1;SetPasswordNeverExpires.ps1;Config-ForceLevel2.ps1;Update-VisualStudioLicense.ps1;Config-RSAKeys.ps1;</postscript>
      <tools>
        <tool name="DotNetCore" EXEName="dotnet-sdk-latest.exe" version="Latest" CPUArchitecture="x64" ArgumentList="/quiet"/>
        <tool name="Win32-OpenSSH" ZipName="OpenSSH-Win64.zip" version="v9.2.2.0p1-Beta" CPUArchitecture="x64" targetFolder="c:\" />
        <tool name="Win32-OpenSSH-Certs" ZipName="win_ssh_keys.zip" targetFolder="c:\OpenSSH-Win64" installScript="install.ps1" />
        <tool name="PowerShellCore" MSIName="PowerShellCore.msi" version="7.3.4" CPUArchitecture="x64" />
        <tool name="certs" ZipName="id_rsa.zip" targetFolder="C:\id_rsa\.ssh" />
        <TestsuiteZip ZipName="FileServer-TestSuite-ServerEP.zip" targetFolder="c:\FileServer-TestSuite-ServerEP"/>
      </tools>
    </vm>
  </servers>
</lab>