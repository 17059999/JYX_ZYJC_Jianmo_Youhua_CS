<lab>
  <core>
    <username>Administrator</username>
    <password>Password01!</password>
    <legacyclient>true</legacyclient>
    <basecpu>4</basecpu>
    <Description>Domain cluster ENV: DC01(this will be setup using another configure), Node01, Node02, Storage01</Description>
  </core>
  <network>
    <vnet>
      <name>PLUGFEST-CLS-INTERNAL</name>
      <networktype>Internal</networktype>
      <hostisgateway>true</hostisgateway>
      <ip>10.10.1.1</ip>
      <subnet>255.255.254.0</subnet>
    </vnet>      
  </network>
  <Parameters>
  <!--Parameters for automation run-->
      <Parameter Name="TestCase" Value="Execute-TestCaseByContext.ps1" Comment="Which test case to run." />
      <Parameter Name="TestCaseTimeout" Value="28800" Comment="Test case time out in seconds." />
      <Parameter Name="ContextName" Value="Win2016_Domain_Cluster_SMB311" Comment="" />
      <Parameter Name="TestDirInVM" Value="C:\Test" Comment="" />
  </Parameters>
  <!--for cluster setup-->
  <ha>
    <cluster>
      <name>CLUSTER01</name>
      <ip>10.10.0.88</ip>
    </cluster>
    <generalfs>
      <name>GENERALFS01</name>
      <ip>10.10.0.89</ip>
    </generalfs>
    <scaleoutfs>
      <name>SCALEOUTFS01</name>
    </scaleoutfs>    
  </ha>
  <servers>
    <vm>
      <installorder>1</installorder>
      <role>IscsiStorage</role>
       <imageReference>
        <diskName>17763.194.amd64fre.rs5_release.VS2017-ServerDataCenter.vhd</diskName>
        <answerFile>17763_ServerDataCenter.xml</answerFile>
      </imageReference>
      <hypervname>CLS01-STORAGE01</hypervname>
      <name>CLS01-STORAGE01</name>
      <sku>server</sku>
      <domain>Workgroup</domain>
      <vnet>PLUGFEST-CLS-INTERNAL</vnet>
      <ip>10.10.1.3</ip>
      <subnet>255.255.254.0</subnet>
      <cpu>1</cpu>
      <memory>512</memory>
      <minimumram>512</minimumram>
      <maximumram>2048</maximumram>
      <installfeaturescript>Install-WindowsFeatureForFileServer.ps1</installfeaturescript>
      <postscript>Disable_Firewall.ps1;SetPasswordNeverExpires.ps1;Create-IscsiTarget.ps1;Check-StorageStatus.ps1</postscript>
      <isiscsitarget>true</isiscsitarget>
      <iscsitargetname>ClusterTarget</iscsitargetname>
    </vm>  
    <vm>
      <installorder>2</installorder>
      <role>DC</role>
       <imageReference>
        <diskName>17763.194.amd64fre.rs5_release.VS2017-ServerDataCenter.vhd</diskName>
        <answerFile>17763_ServerDataCenter.xml</answerFile>
      </imageReference>
      <hypervname>CLS01-DC01</hypervname>
      <name>CLS01-DC01</name>
      <sku>server</sku>
      <isdc>true</isdc>
      <domain>contoso.com</domain>
      <username>Administrator</username>
      <password>Password01!</password>
      <vnet>PLUGFEST-CLS-INTERNAL</vnet>
      <ip>10.10.0.253</ip>
      <gateway>Empty</gateway>      
      <dns>127.0.0.1</dns>
      <cpu>1</cpu>
      <memory>1024</memory>
      <minimumram>800</minimumram>
      <maximumram>1024</maximumram>
      <installscript>createdc.ps1</installscript> 
      <installfeaturescript>Install_RemoteAccess_Feature.ps1</installfeaturescript>           
      <postscript>Disable_Firewall.ps1;Create-TestAccount.ps1;SetPasswordNeverExpires.ps1;Create-CbacObjectsInDC.ps1;Import-GPOForClaims.ps1;Check-DCStatus.ps1</postscript>
      <skipwaitingforpostscript>false</skipwaitingforpostscript>
    </vm>  

    <vm>
      <installorder>3</installorder>
      <role>ClusterNode02</role>
       <imageReference>
        <diskName>17763.194.amd64fre.rs5_release.VS2017-ServerDataCenter.vhd</diskName>
        <answerFile>17763_ServerDataCenter.xml</answerFile>
      </imageReference>
      <hypervname>CLS01-NODE02</hypervname>
      <name>CLS01-NODE02</name>
      <sku>server</sku>
      <domain>contoso.com</domain>
      <vnet>PLUGFEST-CLS-INTERNAL</vnet>
      <ip>10.10.0.85</ip>
      <subnet>255.255.254.0</subnet>
      <gateway>10.10.1.1</gateway>
      <dns>10.10.0.253</dns>
      <vnet>PLUGFEST-CLS-INTERNAL</vnet>
      <ip>10.10.0.86</ip>
      <subnet>255.255.254.0</subnet>
      <gateway>10.10.1.1</gateway>
      <dns>10.10.0.253</dns>
      <vnet>PLUGFEST-CLS-INTERNAL</vnet>
      <ip>10.10.0.87</ip>
      <subnet>255.255.254.0</subnet>
      <vnet>PLUGFEST-CLS-INTERNAL</vnet>
      <ip>10.10.1.4</ip>
      <subnet>255.255.254.0</subnet>
      <cpu>1</cpu>
      <memory>768</memory>
      <minimumram>768</minimumram>
      <maximumram>2048</maximumram>
      <isclusternode>true</isclusternode>
      <installscript>domainjoin.ps1</installscript>
      <installfeaturescript>Install-WindowsFeatureForFileServer.ps1</installfeaturescript>
      <postscript>Disable_Firewall.ps1;SetPasswordNeverExpires.ps1;Connect-IscsiTarget.ps1;Config-ClusterNode2.ps1;Config-AsymmetryMode.ps1;Set-RequireSigning.ps1;Check-ClusterNodeStatus.ps1</postscript>
      <skipwaitingforpostscript>false</skipwaitingforpostscript>
    </vm>
    <vm>
      <installorder>4</installorder>
      <role>ClusterNode01</role>
      <hypervname>CLS01-NODE01</hypervname>
      <name>CLS01-NODE01</name>
      <sku>server</sku>
      <domain>contoso.com</domain>
      <vnet>PLUGFEST-CLS-INTERNAL</vnet>
      <ip>10.10.0.82</ip>
      <subnet>255.255.254.0</subnet>
      <gateway>10.10.1.1</gateway>
      <dns>10.10.0.253</dns>
      <vnet>PLUGFEST-CLS-INTERNAL</vnet>
      <ip>10.10.0.83</ip>
      <subnet>255.255.254.0</subnet>
      <gateway>10.10.1.1</gateway>
      <dns>10.10.0.253</dns>
      <vnet>PLUGFEST-CLS-INTERNAL</vnet>
      <ip>10.10.0.84</ip>
      <subnet>255.255.254.0</subnet>
      <vnet>PLUGFEST-CLS-INTERNAL</vnet>
      <ip>10.10.1.5</ip>
      <subnet>255.255.254.0</subnet>
      <cpu>1</cpu>
      <memory>768</memory>
      <minimumram>768</minimumram>
      <maximumram>2048</maximumram>
      <isclusternode>true</isclusternode>
      <installscript>domainjoin.ps1</installscript>
      <installfeaturescript>Install-WindowsFeatureForFileServer.ps1</installfeaturescript>
      <postscript>Disable_Firewall.ps1;SetPasswordNeverExpires.ps1;Connect-IscsiTarget.ps1;Create-ServerFailoverEnv.ps1;Create-SMB2Env.ps1;Create-DFSCEnv.ps1;Create-FSAEnv.ps1;Create-AuthEnv.ps1;Config-AsymmetryMode.ps1;Set-RequireSigning.ps1;Copy-Vhdx.ps1;Set-ComputerPassword.ps1;Check-ClusterNodeStatus.ps1</postscript>
      <skipwaitingforpostscript>false</skipwaitingforpostscript>
    </vm>
    <vm>
      <installorder>5</installorder>
      <role>DriverComputer</role>
      <hypervname>CLS01-CLI01</hypervname>
      <name>CLS01-CLI01</name>
      <sku>client</sku>
      <domain>contoso.com</domain>
      <vnet>PLUGFEST-CLS-INTERNAL</vnet>
      <ip>10.10.0.100</ip>
      <subnet>255.255.254.0</subnet>
      <gateway>10.10.1.1</gateway>
      <dns>10.10.0.253</dns>
      <vnet>PLUGFEST-CLS-INTERNAL</vnet>
      <ip>10.10.0.101</ip>
      <subnet>255.255.254.0</subnet>
      <gateway>10.10.1.1</gateway>
      <dns>10.10.0.253</dns>
      <cpu>2</cpu>
      <memory>2048</memory>
      <minimumram>2048</minimumram>
      <maximumram>4096</maximumram>
      <installscript>InstallMSIAndTools.ps1;domainjoin.ps1</installscript>      
      <postscript>Disable_Firewall.ps1;SetPasswordNeverExpires.ps1;Config-ForceLevel2.ps1</postscript>
      <tools>
        <tool name="MMA" MSIName="MessageAnalyzer64.msi" version="1.20.0107.01" CPUArchitecture="x64" />
        <tool name="NetworkMonitor" MSIName="Netmonpt3.msi" version="3.4.2350.0" CPUArchitecture="x64" />
        <tool name="NetworkMontiorParsers" MSIName="NetworkMonitor_Parsers.msi" version="3.4.2964.0001" CPUArchitecture="x64" />
        <tool name="PTF" MSIName="ProtocolTestFrameworkInstaller.msi" version="1.0.7500.0" CPUArchitecture="x86" />   
        <tool name="SE" MSIName="SpecExplorer.msi" version="3.5.3146.0" CPUArchitecture="x86" />
        <tool name="VCRedist" EXEName="vcredist.exe" version="9.0.30729.17" CPUArchitecture="x86" ArgumentList="/q" />
        <tool name="PTM" MSIName="ProtocolTestManager.msi" version="3.20.1.0" />
        <TestsuiteMSI MSIName="FileServer-TestSuite-ServerEP.msi" targetEndpoint="" />
      </tools>
    </vm>    
  </servers>
</lab>